<!DOCTYPE html>
<!--
This file is auto-generated by Vaadin.
-->

<html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body, #outlet {
      height: 100vh;
      width: 100%;
      margin: 0;
    }
  </style>
  <!-- index.ts is included here automatically (either by the dev server or during the build) -->
</head>
<body>
  <!-- This outlet div is where the views are rendered -->
  <div id="outlet"></div>
  <script>
    const darkMedia = matchMedia('(prefers-color-scheme: dark)');

    // Store theme preference in localStorage
    function updateTheme(selectedTheme) {
      // If a specific theme is selected, save it to localStorage
      if (selectedTheme) {
        localStorage.setItem('theme-preference', selectedTheme);
      }

      // Get theme from localStorage or use default
      const savedTheme = localStorage.getItem('theme-preference');

      // Apply the theme
      if (savedTheme === 'olive') {
        document.documentElement.setAttribute('theme', 'olive');
      } else {
        // Otherwise use system preference (dark/light)
        document.documentElement.setAttribute('theme', (darkMedia.matches ? 'dark' : 'light'));
      }
    }

    // Initialize theme on page load
    updateTheme();

    // Update theme when system preference changes
    darkMedia.onchange = () => {
      // Only update if not using a custom theme
      if (localStorage.getItem('theme-preference') !== 'olive') {
        updateTheme();
      }
    }

    // Optional: Add to window for access from other scripts
    window.updateTheme = updateTheme;
  </script>
</body>
</html>